(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{687:function(t,e,i){"use strict";i.r(e);function s(t,e,i){var a=[e];return a.push(t.formatDate(i,{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})),a.join(", ")}var a,o,n,c,l,r,d,u,h=i(0),f=i(2),b=i(6),g=i(1),p=i(58),j=i.n(p),O=i(3),m=i.n(O),v=i(8),_=i(229),M=i(230),w=i(46),C=i(34),y=i(4),N=i.n(y),P=i(15),k=i.n(P),x=i(189),q=i(151),S=i(32),I=i(29),W=i(125),R=i(13),H=i(143),F=i(35),T=i(44),D=i(23),L=i(9),B=Object(L.c)({authorize:{id:"follow_request.authorize",defaultMessage:"Authorize"},reject:{id:"follow_request.reject",defaultMessage:"Reject"}}),A=Object(S.c)((n=o=function(t){function e(){return t.apply(this,arguments)||this}return Object(b.a)(e,t),e.prototype.render=function(){var t=this.props,e=t.intl,i=t.hidden,a=t.account,o=t.onAuthorize,n=t.onReject;return a?i?Object(h.a)(O.Fragment,{},void 0,a.get("display_name"),a.get("username")):Object(h.a)("div",{className:"account"},void 0,Object(h.a)("div",{className:"account__wrapper"},void 0,Object(h.a)(W.a,{className:"account__display-name",title:a.get("acct"),href:a.get("url"),to:"/@"+a.get("acct")},a.get("id"),Object(h.a)("div",{className:"account__avatar-wrapper"},void 0,Object(h.a)(F.a,{account:a,size:36})),Object(h.a)(T.a,{account:a})),Object(h.a)("div",{className:"account__relationship"},void 0,Object(h.a)(D.a,{title:e.formatMessage(B.authorize),icon:"check",onClick:o}),Object(h.a)(D.a,{title:e.formatMessage(B.reject),icon:"times",onClick:n})))):Object(h.a)("div",{})},e}(R.a),Object(g.a)(o,"propTypes",{account:k.a.map.isRequired,onAuthorize:N.a.func.isRequired,onReject:N.a.func.isRequired,intl:N.a.object.isRequired}),a=n))||a,U=i(19),K=Object(v.connect)(function(){var i=Object(C.d)();return function(t,e){return{account:i(t,e.id)}}},function(t,e){var i=e.id;return{onAuthorize:function(){t(Object(U.v)(i))},onReject:function(){t(Object(U.J)(i))}}})(A),z=i(10),E=i(42),Q=i(11),J=i.n(Q),G=Object(S.c)((r=l=function(o){function t(){for(var a,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a=o.call.apply(o,[this].concat(e))||this,Object(g.a)(Object(f.a)(a),"handleMoveUp",function(){var t=a.props,e=t.notification;(0,t.onMoveUp)(e.get("id"))}),Object(g.a)(Object(f.a)(a),"handleMoveDown",function(){var t=a.props,e=t.notification;(0,t.onMoveDown)(e.get("id"))}),Object(g.a)(Object(f.a)(a),"handleOpen",function(){var t=a.props.notification;t.get("status")?a.context.router.history.push("/@"+t.getIn(["account","acct"])+"/posts/"+t.get("status")):a.handleOpenProfile()}),Object(g.a)(Object(f.a)(a),"handleOpenProfile",function(){var t=a.props.notification;a.context.router.history.push("/@"+t.getIn(["account","acct"]))}),Object(g.a)(Object(f.a)(a),"handleMention",function(t){t.preventDefault();var e=a.props,i=e.notification;(0,e.onMention)(i.get("account"),a.context.router.history)}),Object(g.a)(Object(f.a)(a),"handleHotkeyFavourite",function(){var t=a.props.status;t&&a.props.onFavourite(t)}),Object(g.a)(Object(f.a)(a),"handleHotkeyBoost",function(t){var e=a.props.status;e&&a.props.onReblog(e,t)}),Object(g.a)(Object(f.a)(a),"handleHotkeyToggleHidden",function(){var t=a.props.status;t&&a.props.onToggleHidden(t)}),a}Object(b.a)(t,o);var e=t.prototype;return e.getHandlers=function(){return{reply:this.handleMention,favourite:this.handleHotkeyFavourite,boost:this.handleHotkeyBoost,mention:this.handleMention,open:this.handleOpen,openProfile:this.handleOpenProfile,moveUp:this.handleMoveUp,moveDown:this.handleMoveDown,toggleHidden:this.handleHotkeyToggleHidden}},e.renderFollow=function(t,e,i){var a=this.props.intl;return Object(h.a)(H.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:"notification notification-follow focusable",tabIndex:"0","aria-label":s(a,a.formatMessage({id:"notification.follow",defaultMessage:"{name} followed you"},{name:e.get("acct")}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(z.a,{id:"user-plus",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(I.a,{id:"notification.follow",defaultMessage:"{name} followed you",values:{name:i}}))),Object(h.a)(q.a,{id:e.get("id"),withNote:!1,hidden:this.props.hidden})))},e.renderFollowRequest=function(t,e,i){var a=this.props,o=a.intl,n=a.unread;return Object(h.a)(H.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:J()("notification notification-follow-request focusable",{unread:n}),tabIndex:"0","aria-label":s(o,o.formatMessage({id:"notification.follow_request",defaultMessage:"{name} has requested to follow you"},{name:e.get("acct")}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(z.a,{id:"user",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(I.a,{id:"notification.follow_request",defaultMessage:"{name} has requested to follow you",values:{name:i}}))),Object(h.a)(K,{id:e.get("id"),withNote:!1,hidden:this.props.hidden})))},e.renderMention=function(t){return Object(h.a)(x.a,{id:t.get("status"),withDismiss:!0,hidden:this.props.hidden,onMoveDown:this.handleMoveDown,onMoveUp:this.handleMoveUp,contextType:"notifications",getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})},e.renderChatMention=function(t,e){var i=this.props.intl;return Object(h.a)(H.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:"notification notification-chat-mention focusable",tabIndex:"0","aria-label":s(i,i.formatMessage({id:"notification.chat_mention",defaultMessage:"{name} sent you a message"},{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(z.a,{id:"comment",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(I.a,{id:"notification.chat_mention",defaultMessage:"{name} sent you a message",values:{name:e}})))),Object(h.a)("div",{className:"chat-message"},void 0,Object(h.a)("span",{className:"chat-message__bubble",dangerouslySetInnerHTML:{__html:Object(E.b)(t.getIn(["chat_message","content"]))}})))},e.renderEmojiReact=function(t,e){var i=this.props.intl;return Object(h.a)(H.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:"notification notification-emoji-react focusable",tabIndex:"0","aria-label":s(i,i.formatMessage({id:"notification.pleroma:emoji_reaction",defaultMessage:"{name} reacted to your post"},{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)("span",{dangerouslySetInnerHTML:{__html:Object(E.b)(Object(E.b)(t.get("emoji")))}})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(I.a,{id:"notification.pleroma:emoji_reaction",defaultMessage:"{name} reacted to your post",values:{name:e}}))),Object(h.a)(x.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:!!this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},e.renderFavourite=function(t,e){var i=this.props.intl;return Object(h.a)(H.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:"notification notification-favourite focusable",tabIndex:"0","aria-label":s(i,i.formatMessage({id:"notification.favourite",defaultMessage:"{name} liked your post"},{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(z.a,{id:"thumbs-up",className:"star-icon",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(I.a,{id:"notification.favourite",defaultMessage:"{name} liked your post",values:{name:e}}))),Object(h.a)(x.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:!!this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},e.renderReblog=function(t,e){var i=this.props.intl;return Object(h.a)(H.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:"notification notification-reblog focusable",tabIndex:"0","aria-label":s(i,i.formatMessage({id:"notification.reblog",defaultMessage:"{name} reposted your post"},{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(z.a,{id:"retweet",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(I.a,{id:"notification.reblog",defaultMessage:"{name} reposted your post",values:{name:e}}))),Object(h.a)(x.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},e.renderPoll=function(t){var e=this.props.intl;return Object(h.a)(H.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:"notification notification-poll focusable",tabIndex:"0","aria-label":s(e,e.formatMessage({id:"notification.poll",defaultMessage:"A poll you have voted in has ended"}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(z.a,{id:"tasks",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(I.a,{id:"notification.poll",defaultMessage:"A poll you have voted in has ended"}))),Object(h.a)(x.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},e.render=function(){var t=this.props.notification,e=t.get("account"),i={__html:e.get("display_name_html")},a=Object(h.a)("bdi",{},void 0,Object(h.a)(W.a,{className:"notification__display-name",href:"/@"+e.get("acct"),title:e.get("acct"),to:"/@"+e.get("acct"),dangerouslySetInnerHTML:i}));switch(t.get("type")){case"follow":return this.renderFollow(t,e,a);case"follow_request":return this.renderFollowRequest(t,e,a);case"mention":return this.renderMention(t);case"favourite":return this.renderFavourite(t,a);case"reblog":return this.renderReblog(t,a);case"poll":return this.renderPoll(t);case"pleroma:emoji_reaction":return this.renderEmojiReact(t,a);case"pleroma:chat_mention":return this.renderChatMention(t,a)}return null},t}(R.a),Object(g.a)(l,"contextTypes",{router:N.a.object}),Object(g.a)(l,"propTypes",{notification:k.a.map.isRequired,hidden:N.a.bool,onMoveUp:N.a.func.isRequired,onMoveDown:N.a.func.isRequired,onMention:N.a.func.isRequired,onFavourite:N.a.func.isRequired,onReblog:N.a.func.isRequired,onToggleHidden:N.a.func.isRequired,status:k.a.map,intl:N.a.object.isRequired,getScrollPosition:N.a.func,updateScrollBottom:N.a.func,cacheMediaWidth:N.a.func,cachedMediaWidth:N.a.number}),c=r))||c,V=i(21),Y=i(18),X=i(36),Z=i(66),$=i(20),tt=Object(v.connect)(function(){var a=Object(C.f)(),o=Object(C.h)();return function(t,e){var i=a(t,e.notification,e.accountId);return{notification:i,status:i.get("status")?o(t,{id:i.get("status")}):null}}},function(s){return{onMention:function(t,e){s(Object(Y.bb)(t,e))},onModalReblog:function(t){s(Object(X.s)(t))},onReblog:function(a,o){var n=this;s(function(t,e){var i=Object($.f)(e()).get("boostModal");a.get("reblogged")?s(Object(X.w)(a)):o.shiftKey||!i?n.onModalReblog(a):s(Object(V.d)("BOOST",{status:a,onReblog:n.onModalReblog}))})},onFavourite:function(t){t.get("favourited")?s(Object(X.u)(t)):s(Object(X.o)(t))},onToggleHidden:function(t){t.get("hidden")?s(Object(Z.k)(t.get("id"))):s(Object(Z.i)(t.get("id")))}}})(G),et=function(t){function e(){return t.apply(this,arguments)||this}return Object(b.a)(e,t),e.prototype.render=function(){return Object(h.a)("button",{className:"text-btn column-header__setting-btn",tabIndex:"0",onClick:this.props.onClick},void 0,Object(h.a)(z.a,{id:"eraser"})," ",Object(h.a)(I.a,{id:"notifications.clear",defaultMessage:"Clear notifications"}))},e}(m.a.PureComponent),it=i(126),at=i(232),ot=i.n(at),nt=function(o){function t(){for(var a,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a=o.call.apply(o,[this].concat(e))||this,Object(g.a)(Object(f.a)(a),"onChange",function(t){for(var e=t.target,i=0;i<a.props.settingPaths.length;i++)a.props.onChange(a.props.settingPaths[i],e.checked)}),Object(g.a)(Object(f.a)(a),"areTrue",function(t){return!0===a.props.settings.getIn(t)}),a}return Object(b.a)(t,o),t.prototype.render=function(){var t=this.props,e=t.prefix,i=t.settingPaths,a=t.label,o=t.icons,n=t.ariaLabel,s=["setting-toggle",e].filter(Boolean).join("-");return Object(h.a)("div",{className:"setting-toggle","aria-label":n},void 0,Object(h.a)(ot.a,{id:s,checked:i.every(this.areTrue),onChange:this.onChange,icons:o,onKeyDown:this.onKeyDown}),a&&Object(h.a)("label",{htmlFor:s,className:"setting-toggle__label"},void 0,a))},t}(m.a.PureComponent),st=function(a){function t(){for(var o,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return o=a.call.apply(a,[this].concat(e))||this,Object(g.a)(Object(f.a)(o),"onPushChange",function(t,e){o.props.onChange(["push"].concat(t),e)}),Object(g.a)(Object(f.a)(o),"onAllSoundsChange",function(t,e){for(var i=[["sounds","follow"],["sounds","favourite"],["sounds","pleroma:emoji_reaction"],["sounds","mention"],["sounds","reblog"],["sounds","poll"]],a=0;a<i.length;a++)o.props.onChange(i[a],e)}),o}return Object(b.a)(t,a),t.prototype.render=function(){var t=this.props,e=t.settings,i=t.pushSettings,a=t.onChange,o=t.onClear,n=Object(h.a)(I.a,{id:"notifications.column_settings.filter_bar.show",defaultMessage:"Show"}),s=Object(h.a)(I.a,{id:"notifications.column_settings.filter_bar.advanced",defaultMessage:"Display all categories"}),c=Object(h.a)(I.a,{id:"notifications.column_settings.alert",defaultMessage:"Desktop notifications"}),l=Object(h.a)(I.a,{id:"notifications.column_settings.sounds.all_sounds",defaultMessage:"Play sound for all notifications"}),r=Object(h.a)(I.a,{id:"notifications.column_settings.show",defaultMessage:"Show in column"}),d=Object(h.a)(I.a,{id:"notifications.column_settings.sound",defaultMessage:"Play sound"}),u=i.get("browserSupport")&&i.get("isSubscribed"),f=u&&Object(h.a)(I.a,{id:"notifications.column_settings.push",defaultMessage:"Push notifications"});return Object(h.a)("div",{},void 0,Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(et,{onClick:o})),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-all_sounds"},void 0,Object(h.a)("span",{id:"notifications-filter-bar",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.sounds",defaultMessage:"Sounds"})),Object(h.a)(nt,{prefix:"notifications_all_sounds",settings:e,settingPaths:[["sounds","follow"],["sounds","favourite"],["sounds","pleroma:emoji_reaction"],["sounds","mention"],["sounds","reblog"],["sounds","poll"]],onChange:this.onAllSoundsChange,label:l})),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-filter-bar"},void 0,Object(h.a)("span",{id:"notifications-filter-bar",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.filter_bar.category",defaultMessage:"Quick filter bar"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{id:"show-filter-bar",prefix:"notifications",settings:e,settingPath:["quickFilter","show"],onChange:a,label:n}),Object(h.a)(it.a,{id:"show-filter-bar",prefix:"notifications",settings:e,settingPath:["quickFilter","advanced"],onChange:a,label:s}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-follow"},void 0,Object(h.a)("span",{id:"notifications-follow",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.follow",defaultMessage:"New followers:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{prefix:"notifications_desktop",settings:e,settingPath:["alerts","follow"],onChange:a,label:c}),u&&Object(h.a)(it.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","follow"],onChange:this.onPushChange,label:f}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["shows","follow"],onChange:a,label:r}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["sounds","follow"],onChange:a,label:d}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-follow-request"},void 0,Object(h.a)("span",{id:"notifications-follow-request",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.follow_request",defaultMessage:"New follow requests:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{prefix:"notifications_desktop",settings:e,settingPath:["alerts","follow_request"],onChange:a,label:c}),u&&Object(h.a)(it.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","follow_request"],onChange:this.onPushChange,label:f}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["shows","follow_request"],onChange:a,label:r}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["sounds","follow_request"],onChange:a,label:d}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-favourite"},void 0,Object(h.a)("span",{id:"notifications-favourite",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.favourite",defaultMessage:"Likes:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{prefix:"notifications_desktop",settings:e,settingPath:["alerts","favourite"],onChange:a,label:c}),u&&Object(h.a)(it.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","favourite"],onChange:this.onPushChange,label:f}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["shows","favourite"],onChange:a,label:r}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["sounds","favourite"],onChange:a,label:d}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-emoji-react"},void 0,Object(h.a)("span",{id:"notifications-favourite",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.emoji_react",defaultMessage:"Emoji reacts:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{prefix:"notifications_desktop",settings:e,settingPath:["alerts","pleroma:emoji_reaction"],onChange:a,label:c}),u&&Object(h.a)(it.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","pleroma:emoji_reaction"],onChange:this.onPushChange,label:f}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["shows","pleroma:emoji_reaction"],onChange:a,label:r}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["sounds","pleroma:emoji_reaction"],onChange:a,label:d}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-mention"},void 0,Object(h.a)("span",{id:"notifications-mention",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.mention",defaultMessage:"Mentions:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{prefix:"notifications_desktop",settings:e,settingPath:["alerts","mention"],onChange:a,label:c}),u&&Object(h.a)(it.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","mention"],onChange:this.onPushChange,label:f}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["shows","mention"],onChange:a,label:r}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["sounds","mention"],onChange:a,label:d}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-reblog"},void 0,Object(h.a)("span",{id:"notifications-reblog",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.reblog",defaultMessage:"Reposts:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{prefix:"notifications_desktop",settings:e,settingPath:["alerts","reblog"],onChange:a,label:c}),u&&Object(h.a)(it.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","reblog"],onChange:this.onPushChange,label:f}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["shows","reblog"],onChange:a,label:r}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["sounds","reblog"],onChange:a,label:d}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-poll"},void 0,Object(h.a)("span",{id:"notifications-poll",className:"column-settings__section"},void 0,Object(h.a)(I.a,{id:"notifications.column_settings.poll",defaultMessage:"Poll results:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it.a,{prefix:"notifications_desktop",settings:e,settingPath:["alerts","poll"],onChange:a,label:c}),u&&Object(h.a)(it.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","poll"],onChange:this.onPushChange,label:f}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["shows","poll"],onChange:a,label:r}),Object(h.a)(it.a,{prefix:"notifications",settings:e,settingPath:["sounds","poll"],onChange:a,label:d}))))},t}(m.a.PureComponent),ct=i(115),lt=Object(L.c)({clearMessage:{id:"notifications.clear_confirmation",defaultMessage:"Are you sure you want to permanently clear all your notifications?"},clearConfirm:{id:"notifications.clear",defaultMessage:"Clear notifications"}}),rt=Object(S.c)(Object(v.connect)(function(t){return{settings:Object($.f)(t).get("notifications"),pushSettings:t.get("push_notifications")}},function(i,t){var e=t.intl;return{onChange:function(t,e){"push"===t[0]?i(Object(ct.e)(t.slice(1),e)):"quickFilter"===t[0]?(i(Object($.d)(["notifications"].concat(t),e)),i(Object(w.p)("all"))):i(Object($.d)(["notifications"].concat(t),e))},onClear:function(){i(Object(V.d)("CONFIRM",{message:e.formatMessage(lt.clearMessage),confirm:e.formatMessage(lt.clearConfirm),onConfirm:function(){return i(Object(w.l)())}}))}}})(st)),dt=Object(L.c)({mentions:{id:"notifications.filter.mentions",defaultMessage:"Mentions"},favourites:{id:"notifications.filter.favourites",defaultMessage:"Likes"},boosts:{id:"notifications.filter.boosts",defaultMessage:"Reposts"},polls:{id:"notifications.filter.polls",defaultMessage:"Poll results"},follows:{id:"notifications.filter.follows",defaultMessage:"Follows"},emoji_reacts:{id:"notifications.filter.emoji_reacts",defaultMessage:"Emoji reacts:"}}),ut=Object(S.c)(d=function(t){function e(){return t.apply(this,arguments)||this}Object(b.a)(e,t);var i=e.prototype;return i.onClick=function(t){var e=this;return function(){return e.props.selectFilter(t)}},i.render=function(){var t=this.props,e=t.selectedFilter,i=t.advancedMode,a=t.intl;return i?Object(h.a)("div",{className:"notification__filter-bar"},void 0,Object(h.a)("button",{className:"all"===e?"active":"",onClick:this.onClick("all")},void 0,Object(h.a)(I.a,{id:"notifications.filter.all",defaultMessage:"All"})),Object(h.a)("button",{className:"mention"===e?"active":"",onClick:this.onClick("mention"),title:a.formatMessage(dt.mentions)},void 0,Object(h.a)(z.a,{id:"at",fixedWidth:!0})),Object(h.a)("button",{className:"favourite"===e?"active":"",onClick:this.onClick("favourite"),title:a.formatMessage(dt.favourites)},void 0,Object(h.a)(z.a,{id:"star",fixedWidth:!0})),Object(h.a)("button",{className:"pleroma:emoji_reaction"===e?"active":"",onClick:this.onClick("pleroma:emoji_reaction"),title:a.formatMessage(dt.favourites)},void 0,Object(h.a)(z.a,{id:"star",fixedWidth:!0})),Object(h.a)("button",{className:"reblog"===e?"active":"",onClick:this.onClick("reblog"),title:a.formatMessage(dt.boosts)},void 0,Object(h.a)(z.a,{id:"retweet",fixedWidth:!0})),Object(h.a)("button",{className:"poll"===e?"active":"",onClick:this.onClick("poll"),title:a.formatMessage(dt.polls)},void 0,Object(h.a)(z.a,{id:"tasks",fixedWidth:!0})),Object(h.a)("button",{className:"follow"===e?"active":"",onClick:this.onClick("follow"),title:a.formatMessage(dt.follows)},void 0,Object(h.a)(z.a,{id:"user-plus",fixedWidth:!0}))):Object(h.a)("div",{className:"notification__filter-bar"},void 0,Object(h.a)("button",{className:"all"===e?"active":"",onClick:this.onClick("all")},void 0,Object(h.a)(I.a,{id:"notifications.filter.all",defaultMessage:"All"})),Object(h.a)("button",{className:"mention"===e?"active":"",onClick:this.onClick("mention")},void 0,Object(h.a)(I.a,{id:"notifications.filter.mentions",defaultMessage:"Mentions"})))},e}(m.a.PureComponent))||d,ft=Object(v.connect)(function(t){var e=Object($.f)(t);return{selectedFilter:e.getIn(["notifications","quickFilter","active"]),advancedMode:e.getIn(["notifications","quickFilter","advanced"])}},function(e){return{selectFilter:function(t){e(Object(w.p)(t))}}})(ut),ht=i(70),bt=i(5),gt=i(228),pt=i(314),jt=i(315);i.d(e,"default",function(){return vt});var Ot=Object(L.c)({title:{id:"column.notifications",defaultMessage:"Notifications"},queue:{id:"notifications.queue_label",defaultMessage:"Click to see {count} new {count, plural, one {notification} other {notifications}}"}}),mt=Object(ht.a)([function(t){return Object($.f)(t).getIn(["notifications","quickFilter","show"])},function(t){return Object($.f)(t).getIn(["notifications","quickFilter","active"])},function(t){return Object(bt.List)(Object($.f)(t).getIn(["notifications","shows"]).filter(function(t){return!t}).keys())},function(t){return t.getIn(["notifications","items"]).toList()}],function(t,e,i,a){return t&&"all"!==e?a.filter(function(t){return null!==t&&e===t.get("type")}):a.filterNot(function(t){return null!==t&&i.includes(t.get("type"))})}),vt=Object(v.connect)(function(t){return{showFilterBar:Object($.f)(t).getIn(["notifications","quickFilter","show"]),notifications:mt(t),isLoading:t.getIn(["notifications","isLoading"],!0),isUnread:0<t.getIn(["notifications","unread"]),hasMore:t.getIn(["notifications","hasMore"]),totalQueuedNotificationsCount:t.getIn(["notifications","totalQueuedNotificationsCount"],0)}})(u=Object(S.c)(u=function(o){function t(){for(var i,t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return i=o.call.apply(o,[this].concat(e))||this,Object(g.a)(Object(f.a)(i),"handleLoadGap",function(t){i.props.dispatch(Object(w.n)({maxId:t}))}),Object(g.a)(Object(f.a)(i),"handleLoadOlder",j()(function(){var t=i.props.notifications.last();i.props.dispatch(Object(w.n)({maxId:t&&t.get("id")}))},300,{leading:!0})),Object(g.a)(Object(f.a)(i),"handleScrollToTop",j()(function(){i.props.dispatch(Object(w.o)(!0))},100)),Object(g.a)(Object(f.a)(i),"handleScroll",j()(function(){i.props.dispatch(Object(w.o)(!1))},100)),Object(g.a)(Object(f.a)(i),"setColumnRef",function(t){i.column=t}),Object(g.a)(Object(f.a)(i),"handleMoveUp",function(e){var t=i.props.notifications.findIndex(function(t){return null!==t&&t.get("id")===e})-1;i._selectChild(t,!0)}),Object(g.a)(Object(f.a)(i),"handleMoveDown",function(e){var t=i.props.notifications.findIndex(function(t){return null!==t&&t.get("id")===e})+1;i._selectChild(t,!1)}),Object(g.a)(Object(f.a)(i),"handleDequeueNotifications",function(){i.props.dispatch(Object(w.m)())}),i}Object(b.a)(t,o);var e=t.prototype;return e.componentWillUnmount=function(){this.handleLoadOlder.cancel(),this.handleScrollToTop.cancel(),this.handleScroll.cancel(),this.props.dispatch(Object(w.o)(!1))},e.componentDidMount=function(){this.handleDequeueNotifications(),this.props.dispatch(Object(w.o)(!0))},e._selectChild=function(t,e){var i=this.column.node,a=i.querySelector("article:nth-of-type("+(t+1)+") .focusable");a&&(e&&i.scrollTop>a.offsetTop?a.scrollIntoView(!0):!e&&i.scrollTop+i.clientHeight<a.offsetTop+a.offsetHeight&&a.scrollIntoView(!1),a.focus())},e.render=function(){var i=this,t=this.props,e=t.intl,a=t.notifications,o=t.isLoading,n=t.isUnread,s=t.hasMore,c=t.showFilterBar,l=t.totalQueuedNotificationsCount,r=Object(h.a)(I.a,{id:"empty_column.notifications",defaultMessage:"You don't have any notifications yet. Interact with others to start the conversation."}),d=null,u=c?Object(h.a)(ft,{}):null,d=o&&this.scrollableContent?this.scrollableContent:0<a.size||s?a.map(function(t,e){return null===t?Object(h.a)(pt.a,{disabled:o,maxId:0<e?a.getIn([e-1,"id"]):null,onClick:i.handleLoadGap},"gap:"+a.getIn([e+1,"id"])):Object(h.a)(tt,{notification:t,accountId:t.get("account"),onMoveUp:i.handleMoveUp,onMoveDown:i.handleMoveDown},t.get("id"))}):null;this.scrollableContent=d;var f=Object(h.a)(gt.a,{scrollKey:"notifications",isLoading:o,showLoading:o&&0===a.size,hasMore:s,emptyMessage:r,onLoadMore:this.handleLoadOlder,onScrollToTop:this.handleScrollToTop,onScroll:this.handleScroll},void 0,d);return m.a.createElement(_.a,{ref:this.setColumnRef,label:e.formatMessage(Ot.title)},Object(h.a)(M.a,{icon:"bell",active:n,title:e.formatMessage(Ot.title)},void 0,Object(h.a)(rt,{})),u,Object(h.a)(jt.a,{onClick:this.handleDequeueNotifications,count:l,message:Ot.queue}),f)},t}(m.a.PureComponent))||u)||u}}]);
//# sourceMappingURL=notifications-968acdc008e29ad893bb.chunk.js.map