(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{664:function(t,a,e){"use strict";e.r(a),e.d(a,"default",function(){return R});var c,o,n,u=e(0),i=e(2),s=e(6),d=e(1),r=e(3),p=e.n(r),l=e(8),h=e(15),b=e.n(h),O=e(4),j=e.n(O),m=e(19),f=e(24),v=e(120),g=e(227),I=e(13),M=e(34),w=e(295),L=e(313),y=e(580),_=e(21),x=e(710),C=e(29),N=function(o){function t(){for(var t,a=arguments.length,e=new Array(a),c=0;c<a;c++)e[c]=arguments[c];return t=o.call.apply(o,[this].concat(e))||this,Object(d.a)(Object(i.a)(t),"handleLoadMore",function(){t.props.onLoadMore(t.props.maxId)}),t}return Object(s.a)(t,o),t.prototype.render=function(){return Object(u.a)(L.a,{disabled:this.props.disabled,onClick:this.handleLoadMore})},t}(I.a);Object(d.a)(N,"propTypes",{maxId:j.a.string,onLoadMore:j.a.func.isRequired});var R=Object(l.connect)(function(t,a){var e,c=a.params.username,o=(a.withReplies,t.get("me")),n=t.getIn(["accounts"]),i=t.getIn(["accounts",-1,"username"],"").toLowerCase()===c.toLowerCase(),s=-1,d=c;i?s=null:(s=(e=n.find(function(t){return c.toLowerCase()===t.getIn(["acct"],"").toLowerCase()}))?e.getIn(["id"],null):-1,d=e?e.getIn(["acct"],""):"");var r=t.getIn(["relationships",s,"blocked_by"],!1);return{accountId:s,unavailable:o!==s&&r,accountUsername:d,isAccount:!!t.getIn(["accounts",s]),attachments:Object(M.a)(t,s),isLoading:t.getIn(["timelines","account:"+s+":media","isLoading"]),hasMore:t.getIn(["timelines","account:"+s+":media","hasMore"])}})((n=o=function(o){function t(){for(var c,t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];return c=o.call.apply(o,[this].concat(a))||this,Object(d.a)(Object(i.a)(c),"state",{width:323}),Object(d.a)(Object(i.a)(c),"handleScrollToBottom",function(){c.props.hasMore&&c.handleLoadMore(0<c.props.attachments.size?c.props.attachments.last().getIn(["status","id"]):void 0)}),Object(d.a)(Object(i.a)(c),"handleScroll",function(t){var a=t.target,e=a.scrollTop;a.scrollHeight-e-a.clientHeight<150&&!c.props.isLoading&&c.handleScrollToBottom()}),Object(d.a)(Object(i.a)(c),"handleLoadMore",function(t){c.props.accountId&&-1!==c.props.accountId&&c.props.dispatch(Object(f.s)(c.props.accountId,{maxId:t}))}),Object(d.a)(Object(i.a)(c),"handleLoadOlder",function(t){t.preventDefault(),c.handleScrollToBottom()}),Object(d.a)(Object(i.a)(c),"handleOpenMedia",function(a){var t,e;"video"===a.get("type")?c.props.dispatch(Object(_.d)("VIDEO",{media:a,status:a.get("status"),account:a.get("account")})):(e=(t=a.getIn(["status","media_attachments"])).findIndex(function(t){return t.get("id")===a.get("id")}),c.props.dispatch(Object(_.d)("MEDIA",{media:t,index:e,status:a.get("status"),account:a.get("account")})))}),Object(d.a)(Object(i.a)(c),"handleRef",function(t){t&&c.setState({width:t.offsetWidth})}),c}Object(s.a)(t,o);var a=t.prototype;return a.componentDidMount=function(){var t=this.props,a=t.params.username,e=t.accountId;e&&-1!==e?(this.props.dispatch(Object(m.B)(e)),this.props.dispatch(Object(f.s)(e))):this.props.dispatch(Object(m.C)(a))},a.componentDidUpdate=function(t){var a=this.props,e=a.accountId,c=a.params;e&&-1!==e&&e!==t.accountId&&e&&(this.props.dispatch(Object(m.B)(c.accountId)),this.props.dispatch(Object(f.s)(e)))},a.render=function(){var e=this,t=this.props,c=t.attachments,a=t.isLoading,o=t.hasMore,n=t.isAccount,i=t.accountId,s=t.unavailable,d=t.accountUsername,r=this.state.width;if(!n&&-1!==i)return Object(u.a)(g.a,{},void 0,Object(u.a)(y.a,{}));if(-1===i||!c&&a)return Object(u.a)(g.a,{},void 0,Object(u.a)(v.a,{}));var l=null;return!o||a&&0===c.size||(l=Object(u.a)(L.a,{visible:!a,onClick:this.handleLoadOlder})),s?Object(u.a)(g.a,{},void 0,Object(u.a)("div",{className:"empty-column-indicator"},void 0,Object(u.a)(C.a,{id:"empty_column.account_unavailable",defaultMessage:"Profile unavailable"}))):Object(u.a)(g.a,{},void 0,Object(u.a)("div",{className:"slist slist--flex",onScroll:this.handleScroll},void 0,Object(u.a)("div",{className:"account__section-headline"},void 0,Object(u.a)("div",{style:{width:"100%",display:"flex"}},void 0,Object(u.a)(x.a,{exact:!0,to:"/@"+d},void 0,Object(u.a)(C.a,{id:"account.posts",defaultMessage:"Posts"})),Object(u.a)(x.a,{exact:!0,to:"/@"+d+"/with_replies"},void 0,Object(u.a)(C.a,{id:"account.posts_with_replies",defaultMessage:"Posts and replies"})),Object(u.a)(x.a,{exact:!0,to:"/@"+d+"/media"},void 0,Object(u.a)(C.a,{id:"account.media",defaultMessage:"Media"})))),p.a.createElement("div",{role:"feed",className:"account-gallery__container",ref:this.handleRef},c.map(function(t,a){return null===t?Object(u.a)(N,{maxId:0<a?c.getIn(a-1,"id"):null,onLoadMore:e.handleLoadMore},"more:"+c.getIn(a+1,"id")):Object(u.a)(w.a,{attachment:t,displayWidth:r,onOpenMedia:e.handleOpenMedia},t.getIn(["status","id"])+"+"+t.get("id"))}),0===c.size&&Object(u.a)("div",{className:"empty-column-indicator"},void 0,Object(u.a)(C.a,{id:"account_gallery.none",defaultMessage:"No media to show."})),l),a&&0===c.size&&Object(u.a)("div",{className:"slist__append"},void 0,Object(u.a)(v.a,{}))))},t}(I.a),Object(d.a)(o,"propTypes",{params:j.a.object.isRequired,dispatch:j.a.func.isRequired,attachments:b.a.list.isRequired,isLoading:j.a.bool,hasMore:j.a.bool,isAccount:j.a.bool,unavailable:j.a.bool}),c=n))||c}}]);
//# sourceMappingURL=account_gallery-0544d3d7047ebc4259a5.chunk.js.map