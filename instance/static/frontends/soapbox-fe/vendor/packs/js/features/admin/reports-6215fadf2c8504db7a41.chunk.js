(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{700:function(e,t,a){"use strict";a.r(t);var n,i,s,o,r,c,d,u,p,l=a(0),m=a(2),g=a(6),b=a(1),O=(a(3),a(9)),h=a(32),j=a(8),v=a(13),f=a(4),M=a.n(f),_=a(15),y=a.n(_),w=a(588),I=a(228),R=a(31),C=a(61),N=a(29),k=a(35),x=a(53),D=a(77),L=a(584),S=a(124),A=a(21),T=a(587),U=a.n(T),q=a(22),z=a(99),E=a(100),V=Object(O.c)({viewStatus:{id:"admin.reports.actions.view_status",defaultMessage:"View post"},deleteStatus:{id:"admin.statuses.actions.delete_status",defaultMessage:"Delete post"}}),J=Object(j.connect)()(n=Object(h.c)((s=i=function(n){function e(){for(var i,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return i=n.call.apply(n,[this].concat(t))||this,Object(b.a)(Object(m.a)(i),"makeMenu",function(){var e=i.props,t=e.intl,a=e.status,n=a.getIn(["account","acct"]);return[{text:t.formatMessage(V.viewStatus,{acct:"@"+n}),to:"/@"+n+"/posts/"+a.get("id")},{text:t.formatMessage(V.deleteStatus,{acct:"@"+n}),action:i.handleDeleteStatus}]}),Object(b.a)(Object(m.a)(i),"getMedia",function(){var t=i.props.status;if(0<t.get("media_attachments").size&&!t.get("media_attachments").some(function(e){return"unknown"===e.get("type")})){if("video"===t.getIn(["media_attachments",0,"type"])){var a=t.getIn(["media_attachments",0]);return Object(l.a)(z.a,{fetchComponent:q.X,loading:i.renderLoadingVideoPlayer},void 0,function(e){return Object(l.a)(e,{preview:a.get("preview_url"),blurhash:a.get("blurhash"),src:a.get("url"),alt:a.get("description"),aspectRatio:a.getIn(["meta","original","aspect"]),width:239,height:110,inline:!0,sensitive:t.get("sensitive"),onOpenVideo:U.a})})}if("audio"!==t.getIn(["media_attachments",0,"type"]))return Object(l.a)(z.a,{fetchComponent:q.E,loading:i.renderLoadingMediaGallery},void 0,function(e){return Object(l.a)(e,{media:t.get("media_attachments"),sensitive:t.get("sensitive"),height:110,onOpenMedia:i.handleOpenMedia})});var n=t.getIn(["media_attachments",0]);return Object(l.a)(z.a,{fetchComponent:q.c,loading:i.renderLoadingAudioPlayer},void 0,function(e){return Object(l.a)(e,{src:n.get("url"),alt:n.get("description"),inline:!0,sensitive:t.get("sensitive"),onOpenAudio:U.a})})}return null}),Object(b.a)(Object(m.a)(i),"handleOpenMedia",function(e,t){(0,i.props.dispatch)(Object(A.d)("MEDIA",{media:e,index:t}))}),Object(b.a)(Object(m.a)(i),"handleDeleteStatus",function(){var e=i.props,t=e.intl,a=e.dispatch,n=e.status.get("id");a(Object(E.b)(t,n))}),i}return Object(g.a)(e,n),e.prototype.render=function(){var e=this.props.status,t=this.getMedia(),a=this.makeMenu();return Object(l.a)("div",{className:"admin-report__status"},void 0,Object(l.a)("div",{className:"admin-report__status-content"},void 0,Object(l.a)(S.a,{status:e}),t),Object(l.a)("div",{className:"admin-report__status-actions"},void 0,Object(l.a)(D.a,{items:a,icon:"ellipsis-v",size:18,direction:"right"})))},e}(v.a),Object(b.a)(i,"propTypes",{status:y.a.map.isRequired,report:y.a.map}),n=s))||n)||n,P=a(50),G=Object(O.c)({reportClosed:{id:"admin.reports.report_closed_message",defaultMessage:"Report on @{name} was closed"},deactivateUser:{id:"admin.users.actions.deactivate_user",defaultMessage:"Deactivate @{name}"},deleteUser:{id:"admin.users.actions.delete_user",defaultMessage:"Delete @{name}"}}),H=Object(j.connect)()(o=Object(h.c)((c=r=function(n){function e(){for(var i,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return i=n.call.apply(n,[this].concat(t))||this,Object(b.a)(Object(m.a)(i),"state",{accordionExpanded:!1}),Object(b.a)(Object(m.a)(i),"makeMenu",function(){var e=i.props,t=e.intl,a=e.report;return[{text:t.formatMessage(G.deactivateUser,{name:a.getIn(["account","username"])}),action:i.handleDeactivateUser},{text:t.formatMessage(G.deleteUser,{name:a.getIn(["account","username"])}),action:i.handleDeleteUser}]}),Object(b.a)(Object(m.a)(i),"handleCloseReport",function(){var e=i.props,t=e.intl,a=e.dispatch,n=e.report;a(Object(R.r)([n.get("id")])).then(function(){var e=t.formatMessage(G.reportClosed,{name:n.getIn(["account","username"])});a(P.a.success(e))}).catch(function(){})}),Object(b.a)(Object(m.a)(i),"handleDeactivateUser",function(){var e=i.props,t=e.intl,a=e.dispatch,n=e.report.getIn(["account","id"]);a(Object(E.a)(t,n,function(){return i.handleCloseReport()}))}),Object(b.a)(Object(m.a)(i),"handleDeleteUser",function(){var e=i.props,t=e.intl,a=e.dispatch,n=e.report.getIn(["account","id"]);a(Object(E.c)(t,n,function(){return i.handleCloseReport()}))}),Object(b.a)(Object(m.a)(i),"handleAccordionToggle",function(e){i.setState({accordionExpanded:e})}),i}return Object(g.a)(e,n),e.prototype.render=function(){var t=this.props.report,e=this.state.accordionExpanded,a=this.makeMenu(),n=t.get("statuses"),i=n.count(),s=t.getIn(["account","acct"]),o=t.getIn(["actor","acct"]);return Object(l.a)("div",{className:"admin-report"},t.get("id"),Object(l.a)("div",{className:"admin-report__avatar"},void 0,Object(l.a)(C.a,{to:"/@"+s,title:s},void 0,Object(l.a)(k.a,{account:t.get("account"),size:32}))),Object(l.a)("div",{className:"admin-report__content"},void 0,Object(l.a)("h4",{className:"admin-report__title"},void 0,Object(l.a)(N.a,{id:"admin.reports.report_title",defaultMessage:"Report on {acct}",values:{acct:Object(l.a)(C.a,{to:"/@"+s,title:s},void 0,"@",s)}})),Object(l.a)("div",{className:"admin-report__statuses"},void 0,0<i&&Object(l.a)(L.a,{headline:"Reported posts ("+i+")",expanded:e,onToggle:this.handleAccordionToggle},void 0,n.map(function(e){return Object(l.a)(J,{report:t,status:e},e.get("id"))}))),Object(l.a)("div",{className:"admin-report__quote"},void 0,0<t.get("content","").length&&Object(l.a)("blockquote",{className:"md",dangerouslySetInnerHTML:{__html:t.get("content")}}),Object(l.a)("span",{className:"byline"},void 0,"â€” ",Object(l.a)(C.a,{to:"/@"+o,title:o},void 0,"@",o)))),Object(l.a)("div",{className:"admin-report__actions"},void 0,Object(l.a)(x.a,{className:"button-alternative",size:30,onClick:this.handleCloseReport},void 0,Object(l.a)(N.a,{id:"admin.reports.actions.close",defaultMessage:"Close"})),Object(l.a)(D.a,{items:a,icon:"ellipsis-v",size:24,direction:"right"})))},e}(v.a),Object(b.a)(r,"propTypes",{report:y.a.map.isRequired}),o=c))||o)||o,K=a(34);a.d(t,"default",function(){return B});var X=Object(O.c)({heading:{id:"column.admin.reports",defaultMessage:"Reports"},modlog:{id:"column.admin.reports.menu.moderation_log",defaultMessage:"Moderation Log"},emptyMessage:{id:"admin.reports.empty_message",defaultMessage:"There are no open reports. If a user gets reported, they will show up here."}}),B=Object(j.connect)(function(t){var a=Object(K.g)();return{reports:t.getIn(["admin","openReports"]).toList().map(function(e){return a(t,e)})}})(d=Object(h.c)((p=u=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=i.call.apply(i,[this].concat(a))||this,Object(b.a)(Object(m.a)(e),"state",{isLoading:!0}),Object(b.a)(Object(m.a)(e),"makeColumnMenu",function(){return[{text:e.props.intl.formatMessage(X.modlog),to:"/admin/log"}]}),e}Object(g.a)(e,i);var t=e.prototype;return t.componentDidMount=function(){var e=this;(0,this.props.dispatch)(Object(R.x)()).then(function(){return e.setState({isLoading:!1})}).catch(function(){})},t.render=function(){var e=this.props,t=e.intl,a=e.reports,n=this.state.isLoading,i=n&&0===a.count();return Object(l.a)(w.a,{icon:"gavel",heading:t.formatMessage(X.heading),menu:this.makeColumnMenu()},void 0,Object(l.a)(I.a,{isLoading:n,showLoading:i,scrollKey:"admin-reports",emptyMessage:t.formatMessage(X.emptyMessage)},void 0,a.map(function(e){return Object(l.a)(H,{report:e},e.get("id"))})))},e}(v.a),Object(b.a)(u,"propTypes",{intl:M.a.object.isRequired,reports:y.a.list.isRequired}),d=p))||d)||d}}]);
//# sourceMappingURL=reports-6215fadf2c8504db7a41.chunk.js.map