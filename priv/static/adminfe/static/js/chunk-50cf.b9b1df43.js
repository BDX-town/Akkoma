(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-50cf"],{"/Z02":function(t,e,s){},"12+6":function(t,e,s){},"9/5/":function(t,e,s){(function(e){var s="Expected a function",n=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,v=u||d||Function("return this")(),p=Object.prototype.toString,f=Math.max,g=Math.min,_=function(){return v.Date.now()};function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function w(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return n;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var s=a.test(t);return s||c.test(t)?l(t.slice(2),s?2:8):o.test(t)?n:+t}t.exports=function(t,e,n){var i,r,o,a,c,l,u=0,d=!1,v=!1,p=!0;if("function"!=typeof t)throw new TypeError(s);function m(e){var s=i,n=r;return i=r=void 0,u=e,a=t.apply(n,s)}function $(t){var s=t-l;return void 0===l||s>=e||s<0||v&&t-u>=o}function b(){var t=_();if($(t))return k(t);c=setTimeout(b,function(t){var s=e-(t-l);return v?g(s,o-(t-u)):s}(t))}function k(t){return c=void 0,p&&i?m(t):(i=r=void 0,a)}function y(){var t=_(),s=$(t);if(i=arguments,r=this,l=t,s){if(void 0===c)return function(t){return u=t,c=setTimeout(b,e),d?m(t):a}(l);if(v)return c=setTimeout(b,e),m(l)}return void 0===c&&(c=setTimeout(b,e)),a}return e=w(e)||0,h(n)&&(d=!!n.leading,o=(v="maxWait"in n)?f(w(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==c&&clearTimeout(c),u=0,i=l=r=c=void 0},y.flush=function(){return void 0===c?a:k(_())},y}}).call(this,s("yLpj"))},DVld:function(t,e,s){"use strict";var n=s("/Z02");s.n(n).a},RGjw:function(t,e,s){"use strict";s.r(e);var n=s("9/5/"),i=s.n(n),r=s("lSNA"),o=s.n(r),a=s("MVZn"),c=s.n(a),l={data:function(){return{value:[]}},computed:{isDesktop:function(){return"desktop"===this.$store.state.app.device}},methods:{removeOppositeFilters:function(){var t=Object.keys(this.$store.state.users.filters).length,e=this.$data.value.slice(),s=e.indexOf("local"),n=e.indexOf("external"),i=e.indexOf("active"),r=e.indexOf("deactivated");if(e.length===t)return[];if(s>-1&&n>-1){var o=s>n?n:s;e.splice(o,1)}else if(i>-1&&r>-1){var a=i>r?r:i;e.splice(a,1)}return e},toggleFilters:function(){this.$data.value=this.removeOppositeFilters();var t=this.$data.value.reduce(function(t,e){return c()({},t,o()({},e,!0))},{});this.$store.dispatch("ToggleUsersFilter",t)}}},u=(s("DVld"),s("KHd+")),d=Object(u.a)(l,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-select",{staticClass:"select-field",attrs:{clearable:t.isDesktop,placeholder:t.$t("usersFilter.inputPlaceholder"),multiple:""},on:{change:t.toggleFilters},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[s("el-option-group",{attrs:{label:t.$t("usersFilter.byUserType")}},[s("el-option",{attrs:{value:"local"}},[t._v(t._s(t.$t("usersFilter.local")))]),t._v(" "),s("el-option",{attrs:{value:"external"}},[t._v(t._s(t.$t("usersFilter.external")))])],1),t._v(" "),s("el-option-group",{attrs:{label:t.$t("usersFilter.byStatus")}},[s("el-option",{attrs:{value:"active"}},[t._v(t._s(t.$t("usersFilter.active")))]),t._v(" "),s("el-option",{attrs:{value:"deactivated"}},[t._v(t._s(t.$t("usersFilter.deactivated")))])],1)],1)},[],!1,null,"71bc6b38",null);d.options.__file="UsersFilter.vue";var v={name:"Users",components:{UsersFilter:d.exports},computed:{loading:function(){return this.$store.state.users.loading},users:function(){return this.$store.state.users.fetchedUsers},usersCount:function(){return this.$store.state.users.totalUsersCount},pageSize:function(){return this.$store.state.users.pageSize},currentPage:function(){return this.$store.state.users.currentPage},isDesktop:function(){return"desktop"===this.$store.state.app.device},isMobile:function(){return"mobile"===this.$store.state.app.device},width:function(){return!!this.isMobile&&55}},created:function(){var t=this;this.handleDebounceSearchInput=i()(function(e){t.$store.dispatch("SearchUsers",{query:e,page:1})},500)},mounted:function(){this.$store.dispatch("FetchUsers",{page:1})},methods:{handleDeactivation:function(t){var e=t.nickname;this.$store.dispatch("ToggleUserActivation",e)},handlePageChange:function(t){var e=this.$store.state.users.searchQuery;""===e?this.$store.dispatch("FetchUsers",{page:t}):this.$store.dispatch("SearchUsers",{query:e,page:t})},showDeactivatedButton:function(t){return this.$store.state.user.id!==t},showAdminAction:function(t){var e=t.local,s=t.id;return e&&this.showDeactivatedButton(s)},activationIcon:function(t){return t?"el-icon-error":"el-icon-success"},toggleUserRight:function(t,e){this.$store.dispatch("ToggleRight",{user:t,right:e})},handleDeletion:function(t){this.$store.dispatch("DeleteUser",t)},toggleTag:function(t,e){this.$store.dispatch("ToggleTag",{user:t,tag:e})},getFirstLetter:function(t){return t.charAt(0).toUpperCase()}}},p=(s("hvwo"),Object(u.a)(v,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users-container"},[s("h1",[t._v(t._s(t.$t("users.users")))]),t._v(" "),s("div",{staticClass:"search-container"},[s("users-filter"),t._v(" "),s("el-input",{staticClass:"search",attrs:{placeholder:t.$t("users.search")},on:{input:t.handleDebounceSearchInput}})],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.users}},[s("el-table-column",{attrs:{"min-width":t.width,label:t.$t("users.id"),prop:"id"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("users.name"),prop:"nickname"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.nickname)+"\n        "),t.isDesktop?s("el-tag",{attrs:{type:"info",size:"mini"}},[s("span",[t._v(t._s(e.row.local?t.$t("users.local"):t.$t("users.external")))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{"min-width":t.width,label:t.$t("users.status")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:e.row.deactivated?"danger":"success"}},[t.isDesktop?s("span",[t._v(t._s(e.row.deactivated?t.$t("users.deactivated"):t.$t("users.active")))]):s("i",{class:t.activationIcon(e.row.deactivated)})]),t._v(" "),e.row.roles.admin?s("el-tag",[s("span",[t._v(t._s(t.isDesktop?t.$t("users.admin"):t.getFirstLetter(t.$t("users.admin"))))])]):t._e(),t._v(" "),e.row.roles.moderator?s("el-tag",[s("span",[t._v(t._s(t.isDesktop?t.$t("users.moderator"):t.getFirstLetter(t.$t("users.moderator"))))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("users.actions"),fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-dropdown",{attrs:{size:"small"}},[s("span",{staticClass:"el-dropdown-link"},[t._v("\n            "+t._s(t.$t("users.moderation"))+"\n            "),t.isDesktop?s("i",{staticClass:"el-icon-arrow-down el-icon--right"}):t._e()]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.showAdminAction(e.row)?s("el-dropdown-item",{nativeOn:{click:function(s){return t.toggleUserRight(e.row,"admin")}}},[t._v("\n              "+t._s(e.row.roles.admin?t.$t("users.revokeAdmin"):t.$t("users.grantAdmin"))+"\n            ")]):t._e(),t._v(" "),t.showAdminAction(e.row)?s("el-dropdown-item",{nativeOn:{click:function(s){return t.toggleUserRight(e.row,"moderator")}}},[t._v("\n              "+t._s(e.row.roles.moderator?t.$t("users.revokeModerator"):t.$t("users.grantModerator"))+"\n            ")]):t._e(),t._v(" "),t.showDeactivatedButton(e.row.id)?s("el-dropdown-item",{attrs:{divided:t.showAdminAction(e.row)},nativeOn:{click:function(s){return t.handleDeactivation(e.row)}}},[t._v("\n              "+t._s(e.row.deactivated?t.$t("users.activateAccount"):t.$t("users.deactivateAccount"))+"\n            ")]):t._e(),t._v(" "),t.showDeactivatedButton(e.row.id)?s("el-dropdown-item",{nativeOn:{click:function(s){return t.handleDeletion(e.row)}}},[t._v("\n              "+t._s(t.$t("users.deleteAccount"))+"\n            ")]):t._e(),t._v(" "),s("el-dropdown-item",{class:{"active-tag":e.row.tags.includes("force_nsfw")},attrs:{divided:t.showAdminAction(e.row)},nativeOn:{click:function(s){return t.toggleTag(e.row,"force_nsfw")}}},[t._v("\n              "+t._s(t.$t("users.forceNsfw"))+"\n              "),e.row.tags.includes("force_nsfw")?s("i",{staticClass:"el-icon-check"}):t._e()]),t._v(" "),s("el-dropdown-item",{class:{"active-tag":e.row.tags.includes("strip_media")},nativeOn:{click:function(s){return t.toggleTag(e.row,"strip_media")}}},[t._v("\n              "+t._s(t.$t("users.stripMedia"))+"\n              "),e.row.tags.includes("strip_media")?s("i",{staticClass:"el-icon-check"}):t._e()]),t._v(" "),s("el-dropdown-item",{class:{"active-tag":e.row.tags.includes("force_unlisted")},nativeOn:{click:function(s){return t.toggleTag(e.row,"force_unlisted")}}},[t._v("\n              "+t._s(t.$t("users.forceUnlisted"))+"\n              "),e.row.tags.includes("force_unlisted")?s("i",{staticClass:"el-icon-check"}):t._e()]),t._v(" "),s("el-dropdown-item",{class:{"active-tag":e.row.tags.includes("sandbox")},nativeOn:{click:function(s){return t.toggleTag(e.row,"sandbox")}}},[t._v("\n              "+t._s(t.$t("users.sandbox"))+"\n              "),e.row.tags.includes("sandbox")?s("i",{staticClass:"el-icon-check"}):t._e()]),t._v(" "),e.row.local?s("el-dropdown-item",{class:{"active-tag":e.row.tags.includes("disable_remote_subscription")},nativeOn:{click:function(s){return t.toggleTag(e.row,"disable_remote_subscription")}}},[t._v("\n              "+t._s(t.$t("users.disableRemoteSubscription"))+"\n              "),e.row.tags.includes("disable_remote_subscription")?s("i",{staticClass:"el-icon-check"}):t._e()]):t._e(),t._v(" "),e.row.local?s("el-dropdown-item",{class:{"active-tag":e.row.tags.includes("disable_any_subscription")},nativeOn:{click:function(s){return t.toggleTag(e.row,"disable_any_subscription")}}},[t._v("\n              "+t._s(t.$t("users.disableAnySubscription"))+"\n              "),e.row.tags.includes("disable_any_subscription")?s("i",{staticClass:"el-icon-check"}):t._e()]):t._e()],1)],1)]}}])})],1),t._v(" "),t.loading?t._e():s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{total:t.usersCount,"current-page":t.currentPage,"page-size":t.pageSize,background:"",layout:"prev, pager, next"},on:{"current-change":t.handlePageChange}})],1)],1)},[],!1,null,"693dba04",null));p.options.__file="index.vue";e.default=p.exports},hvwo:function(t,e,s){"use strict";var n=s("12+6");s.n(n).a}}]);