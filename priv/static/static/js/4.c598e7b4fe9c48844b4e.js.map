{"version":3,"sources":["webpack:///./src/components/sticker_picker/sticker_picker.vue?3e6b","webpack:///./src/components/sticker_picker/sticker_picker.vue","webpack:///./src/components/sticker_picker/sticker_picker.js","webpack:///./src/components/sticker_picker/sticker_picker.vue?5847"],"names":["class","StickerPicker","components","TabSwitcher","data","meta","stickers","path","computed","pack","this","$store","state","instance","methods","clear","pick","sticker","name","store","fetch","then","res","blob","file","File","mimetype","formData","FormData","append","statusPosterService","uploadMedia","fileData","$emit","error","console","warn","__exports__","render-only-focused","scrollable-tabs","stickerpack","key","image-tooltip","title","image","tabIcon","src"],"mappings":"gHAAA,Q,4DCEIA,MAAM,kB,gECiDKC,EA/CO,CACpBC,WAAY,CACVC,Y,MAAAA,GAEFC,KAJoB,WAKlB,MAAO,CACLC,KAAM,CACJC,SAAU,IAEZC,KAAM,KAGVC,SAAU,CACRC,KADQ,WAEN,OAAOC,KAAKC,OAAOC,MAAMC,SAASP,UAAY,KAGlDQ,QAAS,CACPC,MADO,WAELL,KAAKL,KAAO,CACVC,SAAU,KAGdU,KANO,SAMDC,EAASC,GAAM,WACbC,EAAQT,KAAKC,OAEnBS,MAAMH,GACHI,MAAK,SAACC,GACLA,EAAIC,OAAOF,MAAK,SAACE,GACf,IAAIC,EAAO,IAAIC,KAAK,CAACF,GAAOL,EAAM,CAAEQ,SAAU,cAC1CC,EAAW,IAAIC,SACnBD,EAASE,OAAO,OAAQL,GACxBM,IAAoBC,YAAY,CAAEZ,QAAOQ,aACtCN,MAAK,SAACW,GACL,EAAKC,MAAM,WAAYD,GACvB,EAAKjB,WACJ,SAACmB,GACFC,QAAQC,KAAK,wBACbD,QAAQC,KAAKF,GACb,EAAKD,MAAM,gBAAiB,uB,gBCpC5C,MAAMI,E,MAA2B,GAAgB,EAAQ,CAAC,CAAC,S,+EFNzD,YA2BM,MA3BN,EA2BM,CAxBJ,YAuBe,GAtBbrC,MAAM,eACLsC,uBAAqB,EACtBC,kBAAA,I,qBAGE,IAA2B,E,gBAD7B,YAiBM,qBAhBkB,EAAA9B,KAAf+B,I,cADT,YAiBM,OAfHC,IAAKD,EAAYjC,KACjBmC,gBAAeF,EAAYnC,KAAKsC,MAChCC,MAAOJ,EAAYjC,KAAOiC,EAAYnC,KAAKwC,QAC5C7C,MAAM,0B,kBAEN,YASM,qBARcwC,EAAYnC,KAAKC,SAA5BW,I,cADT,YASM,OAPHwB,IAAKxB,EACNjB,MAAM,UACL,QAAK,eAAe,EAAAgB,KAAKwB,EAAYjC,KAAOU,EAASuB,EAAYnC,KAAKsC,OAAK,qB,CAE5E,YAEC,OADEG,IAAKN,EAAYjC,KAAOU,G,oDEdtB","file":"static/js/4.c598e7b4fe9c48844b4e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/dist/index.js??ref--2!./sticker_picker.vue?vue&type=style&index=0&id=9cf415b2&lang=scss\"","<template>\n  <div\n    class=\"sticker-picker\"\n  >\n    <tab-switcher\n      class=\"tab-switcher\"\n      :render-only-focused=\"true\"\n      scrollable-tabs\n    >\n      <div\n        v-for=\"stickerpack in pack\"\n        :key=\"stickerpack.path\"\n        :image-tooltip=\"stickerpack.meta.title\"\n        :image=\"stickerpack.path + stickerpack.meta.tabIcon\"\n        class=\"sticker-picker-content\"\n      >\n        <div\n          v-for=\"sticker in stickerpack.meta.stickers\"\n          :key=\"sticker\"\n          class=\"sticker\"\n          @click.stop.prevent=\"pick(stickerpack.path + sticker, stickerpack.meta.title)\"\n        >\n          <img\n            :src=\"stickerpack.path + sticker\"\n          >\n        </div>\n      </div>\n    </tab-switcher>\n  </div>\n</template>\n\n<script src=\"./sticker_picker.js\"></script>\n\n<style lang=\"scss\">\n@import '../../_variables.scss';\n\n.sticker-picker {\n  width: 100%;\n  .contents {\n    min-height: 250px;\n    .sticker-picker-content {\n      display: flex;\n      flex-wrap: wrap;\n      padding: 0 4px;\n      .sticker {\n        display: flex;\n        flex: 1 1 auto;\n        margin: 4px;\n        width: 56px;\n        height: 56px;\n        img {\n          height: 100%;\n          &:hover {\n            filter: drop-shadow(0 0 5px var(--accent, $fallback--link));\n          }\n        }\n      }\n    }\n  }\n}\n\n</style>\n","/* eslint-env browser */\nimport statusPosterService from '../../services/status_poster/status_poster.service.js'\nimport TabSwitcher from '../tab_switcher/tab_switcher.jsx'\n\nconst StickerPicker = {\n  components: {\n    TabSwitcher\n  },\n  data () {\n    return {\n      meta: {\n        stickers: []\n      },\n      path: ''\n    }\n  },\n  computed: {\n    pack () {\n      return this.$store.state.instance.stickers || []\n    }\n  },\n  methods: {\n    clear () {\n      this.meta = {\n        stickers: []\n      }\n    },\n    pick (sticker, name) {\n      const store = this.$store\n      // TODO remove this workaround by finding a way to bypass reuploads\n      fetch(sticker)\n        .then((res) => {\n          res.blob().then((blob) => {\n            var file = new File([blob], name, { mimetype: 'image/png' })\n            var formData = new FormData()\n            formData.append('file', file)\n            statusPosterService.uploadMedia({ store, formData })\n              .then((fileData) => {\n                this.$emit('uploaded', fileData)\n                this.clear()\n              }, (error) => {\n                console.warn(\"Can't attach sticker\")\n                console.warn(error)\n                this.$emit('upload-failed', 'default')\n              })\n          })\n        })\n    }\n  }\n}\n\nexport default StickerPicker\n","import { render } from \"./sticker_picker.vue?vue&type=template&id=9cf415b2\"\nimport script from \"./sticker_picker.js?vue&type=script&lang=js\"\nexport * from \"./sticker_picker.js?vue&type=script&lang=js\"\n\nimport \"./sticker_picker.vue?vue&type=style&index=0&id=9cf415b2&lang=scss\"\n\nimport exportComponent from \"/home/hannah/personal/pleroma-fe/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}